<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>freeablo: extern/StormLib/src/StormCommon.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">freeablo
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_94368d58471c47849c5480892ac671ea.html">extern</a></li><li class="navelem"><a class="el" href="dir_89e56f2d06b933b91dca31e6f4722c7c.html">StormLib</a></li><li class="navelem"><a class="el" href="dir_36a2a79caec59eec5bf132e558ff3189.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">StormCommon.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_storm_common_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************/</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/* SCommon.h                              Copyright (c) Ladislav Zezula 2003 */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/* Common functions for encryption/decryption from Storm.dll. Included by    */</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">/* SFile*** functions, do not include and do not use this file directly      */</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/*   Date    Ver   Who  Comment                                              */</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/* --------  ----  ---  -------                                              */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/* 24.03.03  1.00  Lad  The first version of SFileCommon.h                   */</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/* 12.06.04  1.00  Lad  Renamed to SCommon.h                                 */</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/* 06.09.10  1.00  Lad  Renamed to StormCommon.h                             */</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/*****************************************************************************/</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifndef __STORMCOMMON_H__</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define __STORMCOMMON_H__</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// Compression support</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Include functions from Pkware Data Compression Library</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pklib_8h.html">pklib/pklib.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// Include functions from Huffmann compression</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="huff_8h.html">huffman/huff.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// Include functions from IMA ADPCM compression</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="adpcm_8h.html">adpcm/adpcm.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// Include functions from SPARSE compression</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sparse_8h.html">sparse/sparse.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// Include functions from LZMA compression</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_lzma_enc_8h.html">lzma/C/LzmaEnc.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_lzma_dec_8h.html">lzma/C/LzmaDec.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// Include functions from zlib</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#ifndef __SYS_ZLIB</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">  #include &quot;<a class="code" href="zlib_8h.html">zlib/zlib.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">  #include &lt;<a class="code" href="zlib_8h.html">zlib.h</a>&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// Include functions from bzlib</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#ifndef __SYS_BZLIB</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">  #include &quot;<a class="code" href="bzlib_8h.html">bzip2/bzlib.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">  #include &lt;<a class="code" href="bzlib_8h.html">bzlib.h</a>&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// Cryptography support</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// Headers from LibTomCrypt</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="tomcrypt_8h.html">libtomcrypt/src/headers/tomcrypt.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// For HashStringJenkins</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lookup_8h.html">jenkins/lookup.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">// StormLib private defines</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a03858bd7615318a22fd19031ff62920d">   62</a></span>&#160;<span class="preprocessor">#define ID_MPQ_FILE            0x46494c45     // Used internally for checking TMPQFile (&#39;FILE&#39;)</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// Prevent problems with CRT &quot;min&quot; and &quot;max&quot; functions,</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// as they are not defined on all platforms</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#ad017b78e0f06caf4fcc17e7b1224424c">   66</a></span>&#160;<span class="preprocessor">#define STORMLIB_MIN(a, b) ((a &lt; b) ? a : b)</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#aed78535d79aac58db86db8379f663385">   67</a></span>&#160;<span class="preprocessor">#define STORMLIB_MAX(a, b) ((a &gt; b) ? a : b)</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a3f856fff727e8be7aca73f5b8b3d3f6b">   68</a></span>&#160;<span class="preprocessor">#define STORMLIB_UNUSED(p) ((void)(p))</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// Macro for building 64-bit file offset from two 32-bit</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#ac67482b4d06c66c34ad0dc9686c12fd4">   71</a></span>&#160;<span class="preprocessor">#define MAKE_OFFSET64(hi, lo)      (((ULONGLONG)hi &lt;&lt; 32) | (ULONGLONG)lo)</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// MPQ signature information</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// Size of each signature type</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a16a46df5bcb0d06af2025e9f3eafa742">   77</a></span>&#160;<span class="preprocessor">#define MPQ_WEAK_SIGNATURE_SIZE                 64</span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#aa2556e4b9e179aa51654ece65c87fa13">   78</a></span>&#160;<span class="preprocessor">#define MPQ_STRONG_SIGNATURE_SIZE              256 </span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a518612dd36359588db73865f95b552c0">   79</a></span>&#160;<span class="preprocessor">#define MPQ_STRONG_SIGNATURE_ID         0x5349474E      // ID of the strong signature (&quot;NGIS&quot;)</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// MPQ signature info</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html">   82</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html">_MPQ_SIGNATURE_INFO</a></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a8171e5179fe19c06bf815d772416eae0">   84</a></span>&#160;    <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a8171e5179fe19c06bf815d772416eae0">BeginMpqData</a>;                     <span class="comment">// File offset where the hashing starts</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#ae2771c0504b9606e992b898e52af39f1">   85</a></span>&#160;    <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#ae2771c0504b9606e992b898e52af39f1">BeginExclude</a>;                     <span class="comment">// Begin of the excluded area (used for (signature) file)</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a01e3fa6f8249aa0117d68c69666a7906">   86</a></span>&#160;    <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a01e3fa6f8249aa0117d68c69666a7906">EndExclude</a>;                       <span class="comment">// End of the excluded area (used for (signature) file)</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a1e737f764e9830338f5c6f7a9ef078e5">   87</a></span>&#160;    <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a1e737f764e9830338f5c6f7a9ef078e5">EndMpqData</a>;                       <span class="comment">// File offset where the hashing ends</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a3ecbb8b936292bb8388965d8993c9dfa">   88</a></span>&#160;    <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a3ecbb8b936292bb8388965d8993c9dfa">EndOfFile</a>;                        <span class="comment">// Size of the entire file</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a9336bfe0493f5c6a49a69abbbcaf8cfd">   89</a></span>&#160;    <a class="code" href="_storm_port_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>  <a class="code" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a9336bfe0493f5c6a49a69abbbcaf8cfd">Signature</a>[<a class="code" href="_storm_common_8h.html#aa2556e4b9e179aa51654ece65c87fa13">MPQ_STRONG_SIGNATURE_SIZE</a> + 0x10];</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a92f2e5e2e3b741203a949a968d7af326">   90</a></span>&#160;    <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a92f2e5e2e3b741203a949a968d7af326">cbSignatureSize</a>;                      <span class="comment">// Length of the signature</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a3094e3a410ac87a505e1282b1bf65c07">   91</a></span>&#160;    <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a3094e3a410ac87a505e1282b1bf65c07">SignatureTypes</a>;                       <span class="comment">// See SIGNATURE_TYPE_XXX</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;} <a class="code" href="_storm_common_8h.html#aff1ba604a76e1924e395b80e3b3ff212">MPQ_SIGNATURE_INFO</a>, *<a class="code" href="_storm_common_8h.html#a1be8636d8ec414ad43018fdff4733251">PMPQ_SIGNATURE_INFO</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// Memory management</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// We use our own macros for allocating/freeing memory. If you want</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">// to redefine them, please keep the following rules:</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">//  - The memory allocation must return NULL if not enough memory</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">//    (i.e not to throw exception)</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">//  - The allocating function does not need to fill the allocated buffer with zeros</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//  - Memory freeing function doesn&#39;t have to test the pointer to NULL</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; defined(_DEBUG)</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#define STORM_ALLOC(type, nitems) (type *)HeapAlloc(GetProcessHeap(), 0, ((nitems) * sizeof(type)))</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#define STORM_FREE(ptr)           HeapFree(GetProcessHeap(), 0, ptr)</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a6fe0c42173ef1a4b9f0e837b0c631660">  114</a></span>&#160;<span class="preprocessor">#define STORM_ALLOC(type, nitems) (type *)malloc((nitems) * sizeof(type))</span></div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a50487dadfceefebfb0de8fa711eaf4b3">  115</a></span>&#160;<span class="preprocessor">#define STORM_FREE(ptr)           free(ptr)</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">// StormLib internal global variables</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="keyword">extern</span> <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a> <a class="code" href="_storm_common_8h.html#a0b64f02970b56fe520a2599411b45537">lcFileLocale</a>;                       <span class="comment">// Preferred file locale</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">// Conversion to uppercase/lowercase (and &quot;/&quot; to &quot;\&quot;)</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_storm_common_8h.html#af1a55a67e4f3cbec94d58be9e7b1669b">AsciiToLowerTable</a>[256];</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_storm_common_8h.html#a5f6fa9d0439a797a0a86c5ee70718390">AsciiToUpperTable</a>[256];</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// Encryption and decryption functions</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#ad7ef1a5430dba2e30a1bae61629504c4">  133</a></span>&#160;<span class="preprocessor">#define MPQ_HASH_TABLE_INDEX    0x000</span></div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a08f9b471c3381ddeeebb5975faf04df0">  134</a></span>&#160;<span class="preprocessor">#define MPQ_HASH_NAME_A         0x100</span></div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a00302198f2d31ea36041e90bf942bf02">  135</a></span>&#160;<span class="preprocessor">#define MPQ_HASH_NAME_B         0x200</span></div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a1795a7b5fd56e50e0fb1c8ba0025c57f">  136</a></span>&#160;<span class="preprocessor">#define MPQ_HASH_FILE_KEY       0x300</span></div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a8bdf0921eb8f9c55bec6e5acd2b23b0d">  137</a></span>&#160;<span class="preprocessor">#define MPQ_HASH_KEY2_MIX       0x400</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="_storm_common_8h.html#a253e7854c54b950673d285bc8ceba83a">HashString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwHashType);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="_storm_common_8h.html#a02d21e4503c849811801f033baa4b733">HashStringSlash</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwHashType);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="_storm_common_8h.html#aa45017699ee71c77d177029959cf0378">HashStringLower</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwHashType);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keywordtype">void</span>  <a class="code" href="_storm_common_8h.html#a771e96257f2889763ee169050c798554">InitializeMpqCryptography</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="_storm_common_8h.html#aa2f9f710a63a44de2157a48bff7c5a21">GetHashTableSizeForFileCount</a>(<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwFileCount);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="_storm_common_8h.html#ac689ff242d3c999ae64894707bd7b478">IsPseudoFileName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, <a class="code" href="_storm_port_8h.html#a143be739596851314f3c386bd6f752f9">LPDWORD</a> pdwFileIndex);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="_storm_common_8h.html#a7c410e53e1793314064827d095ba86ce">HashStringJenkins</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="_storm_common_8h.html#a2c4f65854e516a828f691cde03e83a4e">GetDefaultSpecialFileFlags</a>(<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwFileSize, <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a> wFormatVersion);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keywordtype">void</span>  <a class="code" href="_storm_common_8h.html#ad7bab920736d707aae7cde2a53387936">EncryptMpqBlock</a>(<span class="keywordtype">void</span> * pvDataBlock, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwLength, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwKey);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="keywordtype">void</span>  <a class="code" href="_storm_common_8h.html#a16fc4e4dcd9e9497355b41d57caa3853">DecryptMpqBlock</a>(<span class="keywordtype">void</span> * pvDataBlock, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwLength, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwKey);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="_storm_common_8h.html#af8f77586b029465f87c394f5d90532e3">DetectFileKeyBySectorSize</a>(<a class="code" href="_storm_port_8h.html#a143be739596851314f3c386bd6f752f9">LPDWORD</a> EncryptedData, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwSectorSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwSectorOffsLen);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="_storm_common_8h.html#ab6b1a62d4ecfd1a3f53b6a6f333b4c36">DetectFileKeyByContent</a>(<span class="keywordtype">void</span> * pvEncryptedData, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwSectorSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwFileSize);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="_storm_common_8h.html#af48f792817421c6ae782d3ea4f6e8772">DecryptFileKey</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> MpqPos, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwFileSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwFlags);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="_storm_common_8h.html#a5419ca3b1b9735690e1b6a1563194d6e">IsValidMD5</a>(<a class="code" href="_storm_port_8h.html#ac2d3fb16b5b34c1e6ab80014309020eb">LPBYTE</a> pbMd5);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="_storm_common_8h.html#a7fa33ab8e0aa20c88f959637624ee78c">VerifyDataBlockHash</a>(<span class="keywordtype">void</span> * pvDataBlock, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> cbDataBlock, <a class="code" href="_storm_port_8h.html#ac2d3fb16b5b34c1e6ab80014309020eb">LPBYTE</a> expected_md5);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#aec4669e8a9275dc112ebca320ae0e08a">CalculateDataBlockHash</a>(<span class="keywordtype">void</span> * pvDataBlock, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> cbDataBlock, <a class="code" href="_storm_port_8h.html#ac2d3fb16b5b34c1e6ab80014309020eb">LPBYTE</a> md5_hash);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">// Handle validation functions</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * <a class="code" href="_storm_common_8h.html#a67882fdf8d424efbb6b2e1f748583a66">IsValidMpqHandle</a>(<a class="code" href="_storm_port_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a> hMpq);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * <a class="code" href="_storm_common_8h.html#a3216d5c62d758be099dfa3324cf34dd3">IsValidFileHandle</a>(<a class="code" href="_storm_port_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a> hFile);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">// Support for MPQ file tables</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="keywordtype">int</span> <a class="code" href="_storm_common_8h.html#a4fdeaeecf1f7775866f8330165b97e37">ConvertMpqHeaderToFormat4</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> MpqOffset, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> FileSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwFlags);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<a class="code" href="struct___t_m_p_q_hash.html">TMPQHash</a> * <a class="code" href="_storm_common_8h.html#a9eeed4144d8cb5a5f06a0116a1c2133c">FindFreeHashEntry</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwStartIndex, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwName1, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwName2, <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a> lcLocale);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<a class="code" href="struct___t_m_p_q_hash.html">TMPQHash</a> * <a class="code" href="_storm_common_8h.html#aa1133687cdff9769a49bad6d9b8abec1">GetFirstHashEntry</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<a class="code" href="struct___t_m_p_q_hash.html">TMPQHash</a> * <a class="code" href="_storm_common_8h.html#a4dafa8d36c130aae1def856a8f0da655">GetNextHashEntry</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="struct___t_m_p_q_hash.html">TMPQHash</a> * pFirstHash, <a class="code" href="struct___t_m_p_q_hash.html">TMPQHash</a> * pPrevHash);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<a class="code" href="struct___t_m_p_q_hash.html">TMPQHash</a> * <a class="code" href="_storm_common_8h.html#a259665299cf78eb0e253b08d6489da68">AllocateHashEntry</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="struct___t_file_entry.html">TFileEntry</a> * pFileEntry);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<a class="code" href="struct___t_m_p_q_ext_header.html">TMPQExtHeader</a> * <a class="code" href="_storm_common_8h.html#a7bf97c1c4ef7c27dce39e44b1cf0ea9f">LoadExtTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> ByteOffset, <span class="keywordtype">size_t</span> Size, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwSignature, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwKey);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<a class="code" href="struct___t_m_p_q_het_table.html">TMPQHetTable</a> * <a class="code" href="_storm_common_8h.html#a3192325af2d538a1196c76f8dd980d42">LoadHetTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<a class="code" href="struct___t_m_p_q_bet_table.html">TMPQBetTable</a> * <a class="code" href="_storm_common_8h.html#ad45353be81c314aa55264bd932a0758e">LoadBetTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<a class="code" href="struct___t_m_p_q_hash.html">TMPQHash</a> * <a class="code" href="_storm_common_8h.html#ac783fedd5a7c270d1c1e52e846ece77e">LoadHashTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<a class="code" href="struct___t_m_p_q_block.html">TMPQBlock</a> * <a class="code" href="_storm_common_8h.html#adc2df260bf34449da5b48a19c2e9a788">LoadBlockTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <span class="keywordtype">bool</span> bDontFixEntries = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<a class="code" href="struct___t_m_p_q_block.html">TMPQBlock</a> * <a class="code" href="_storm_common_8h.html#a54079a3f5f4410dea238bbfcea108f88">TranslateBlockTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> * pcbTableSize, <span class="keywordtype">bool</span> * pbNeedHiBlockTable);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="_storm_common_8h.html#acb18aa3b31bc45f95eb5e493c619ce52">FindFreeMpqSpace</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">// Functions that load the HET and BET tables</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a5a11a3a1f4c9219d95a3eca374739e79">CreateHashTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwHashTableSize);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#acd34a41b8d29b48ac02c7aecd2f609b5">LoadAnyHashTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a1c0a0948adf593a715e4cdc76bd252fd">BuildFileTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a97fd4e4b3730b45b008fbba7dc7c07e8">RebuildHetTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a4f32b630b4ecbefaceebbbad807e65f8">RebuildFileTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwNewHashTableSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwNewMaxFileCount);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a214be2e28f839a8b8842cd1eb2f3ef71">SaveMPQTables</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<a class="code" href="struct___t_m_p_q_het_table.html">TMPQHetTable</a> * <a class="code" href="_storm_common_8h.html#a993a9091ba191039478c2f74c81ac2a6">CreateHetTable</a>(<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwEntryCount, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwTotalCount, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwHashBitSize, <a class="code" href="_storm_port_8h.html#ac2d3fb16b5b34c1e6ab80014309020eb">LPBYTE</a> pbSrcData);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a01959b3dc86a80003a50a1483937ce7d">FreeHetTable</a>(<a class="code" href="struct___t_m_p_q_het_table.html">TMPQHetTable</a> * pHetTable);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<a class="code" href="struct___t_m_p_q_bet_table.html">TMPQBetTable</a> * <a class="code" href="_storm_common_8h.html#a6f1d95382e1f80306051b174bb4b0da8">CreateBetTable</a>(<a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwMaxFileCount);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a658272ad1160a2562532baec37512bb9">FreeBetTable</a>(<a class="code" href="struct___t_m_p_q_bet_table.html">TMPQBetTable</a> * pBetTable);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">// Functions for finding files in the file table</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<a class="code" href="struct___t_file_entry.html">TFileEntry</a> * <a class="code" href="_storm_common_8h.html#af5707ce5a7b11e9d533b24cda45ce7b1">GetFileEntryAny</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<a class="code" href="struct___t_file_entry.html">TFileEntry</a> * <a class="code" href="_storm_common_8h.html#a7347ab3dd849dcc0350e1ca8d83af6b3">GetFileEntryLocale</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a> lcLocale);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<a class="code" href="struct___t_file_entry.html">TFileEntry</a> * <a class="code" href="_storm_common_8h.html#a90069131da300c2a6d9ff0b7a1b41806">GetFileEntryExact</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a> lcLocale);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<a class="code" href="struct___t_file_entry.html">TFileEntry</a> * <a class="code" href="_storm_common_8h.html#abf78f423c25cfc7a8065eca9dc4480af">GetFileEntryByIndex</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwIndex);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">// Allocates file name in the file entry</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a551f6e01e95accafb0042ae9b8d81e61">AllocateFileName</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="struct___t_file_entry.html">TFileEntry</a> * pFileEntry, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">// Allocates new file entry in the MPQ tables. Reuses existing, if possible</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<a class="code" href="struct___t_file_entry.html">TFileEntry</a> * <a class="code" href="_storm_common_8h.html#aca2f6b3ece92ea308a9bcd3976e9e03d">AllocateFileEntry</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a> lcLocale);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a064b84cb1dd914abd03d6caab3a1e99b">RenameFileEntry</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="struct___t_file_entry.html">TFileEntry</a> * pFileEntry, <span class="keyword">const</span> <span class="keywordtype">char</span> * szNewFileName);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#ab491aefc6c1009d67e63868ea2be6ecc">DeleteFileEntry</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="struct___t_file_entry.html">TFileEntry</a> * pFileEntry);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">// Invalidates entries for (listfile) and (attributes)</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a49c99a591813b88b38d9d219af88a8d4">InvalidateInternalFiles</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">// Retrieves information about the strong signature</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="_storm_common_8h.html#ac66653be3516e818da293725ea5e0cb8">QueryMpqSignatureInfo</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, PMPQ_SIGNATURE_INFO pSignatureInfo);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">// Support for alternate file formats (SBaseSubTypes.cpp)</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keywordtype">int</span> <a class="code" href="_storm_common_8h.html#a8b8ab9555674a392a450c224cf31fcac">ConvertSqpHeaderToFormat4</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> FileSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwFlags);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<a class="code" href="struct___t_m_p_q_hash.html">TMPQHash</a> * <a class="code" href="_storm_common_8h.html#a7b04b4d4e21b0c707fc679cc1755082a">LoadSqpHashTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<a class="code" href="struct___t_m_p_q_block.html">TMPQBlock</a> * <a class="code" href="_storm_common_8h.html#a7bef07138485230b2573bffbae4b3818">LoadSqpBlockTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keywordtype">int</span> <a class="code" href="_storm_common_8h.html#ad428a6ed078dd77d5c5f5cee939d6d8d">ConvertMpkHeaderToFormat4</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> FileSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwFlags);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a1fa04b7884d38fcc61b7f1462b882afb">DecryptMpkTable</a>(<span class="keywordtype">void</span> * pvMpkTable, <span class="keywordtype">size_t</span> cbSize);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<a class="code" href="struct___t_m_p_q_hash.html">TMPQHash</a> * <a class="code" href="_storm_common_8h.html#a47f8eede57764b029bc8f5cd31690901">LoadMpkHashTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<a class="code" href="struct___t_m_p_q_block.html">TMPQBlock</a> * <a class="code" href="_storm_common_8h.html#a91db777f32d2227ed592bd6ab587fe55">LoadMpkBlockTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="keywordtype">int</span> <a class="code" href="_storm_common_8h.html#a89b19091503d06fc3b3a3738218f2350">SCompDecompressMpk</a>(<span class="keywordtype">void</span> * pvOutBuffer, <span class="keywordtype">int</span> * pcbOutBuffer, <span class="keywordtype">void</span> * pvInBuffer, <span class="keywordtype">int</span> cbInBuffer);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">// Common functions - MPQ File</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * <a class="code" href="_storm_common_8h.html#af3e146ce1fda8ffaf72d6391956f29a3">CreateFileHandle</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="struct___t_file_entry.html">TFileEntry</a> * pFileEntry);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="keywordtype">void</span> * <a class="code" href="_storm_common_8h.html#a0201c26eb7513898105243687243e4db">LoadMpqTable</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> ByteOffset, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwCompressedSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwRealSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwKey);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a39393674112575a09c309d648d59a3eb">AllocateSectorBuffer</a>(<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#ace1d87f4df2379a25c5516fbcc027d0c">AllocatePatchInfo</a>(<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf, <span class="keywordtype">bool</span> bLoadFromFile);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#ae7c6e8b33178ca275ec20f68329b5d55">AllocateSectorOffsets</a>(<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf, <span class="keywordtype">bool</span> bLoadFromFile);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a625957b3c4515b0d8664c2c7733f5ae2">AllocateSectorChecksums</a>(<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf, <span class="keywordtype">bool</span> bLoadFromFile);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a7b6bce2874782a80fc6a7ce477e8ab5e">CalculateRawSectorOffset</a>(<a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> &amp; RawFilePos, <a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwSectorOffset);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#ae019465d798f9926fd5cc63697d664f7">WritePatchInfo</a>(<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a55f6d721d95cc322bd68f273b1e40ae1">WriteSectorOffsets</a>(<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a336ebf1e01d695363f7f25a474e627de">WriteSectorChecksums</a>(<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#abfce4a0e949403c3bede613640942c4a">WriteMemDataMD5</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> RawDataOffs, <span class="keywordtype">void</span> * pvRawData, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwRawDataSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwChunkSize, <a class="code" href="_storm_port_8h.html#a143be739596851314f3c386bd6f752f9">LPDWORD</a> pcbTotalSize);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#ad65eac195a2ffc9e9ad511d7b381a9a5">WriteMpqDataMD5</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> RawDataOffs, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwRawDataSize, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwChunkSize);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a18f4fd98a66477ad38b6b12f27cf2ad0">FreeFileHandle</a>(<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> *&amp; hf);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="_storm_common_8h.html#ab5bb17d96d449e811cb62181805307e0">IsIncrementalPatchFile</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> * pvData, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> cbData, <a class="code" href="_storm_port_8h.html#a143be739596851314f3c386bd6f752f9">LPDWORD</a> pdwPatchedFileSize);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#ad2733622c6a770882a35d18aa6235d4f">PatchFileData</a>(<a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a8ac0edc687ba86d98e25c700d9cb0710">FreeArchiveHandle</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> *&amp; ha);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">// Utility functions</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="_storm_common_8h.html#ac0b9f8d5f02bdef74438e8d134d229f0">CheckWildCard</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * szString, <span class="keyword">const</span> <span class="keywordtype">char</span> * szWildCard);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="_storm_common_8h.html#a271822a4e6a88edb8f2f53df8b713023">IsInternalMpqFileName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * <a class="code" href="_storm_common_8h.html#aa911d30d11b362e71a4980dd93919844">GetPlainFileName</a>(<span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szFileName);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="_storm_common_8h.html#aa911d30d11b362e71a4980dd93919844">GetPlainFileName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a6a4cda713880840962cc256ec35ad521">CopyFileName</a>(<a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szTarget, <span class="keyword">const</span> <span class="keywordtype">char</span> * szSource, <span class="keywordtype">size_t</span> cchLength);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a6a4cda713880840962cc256ec35ad521">CopyFileName</a>(<span class="keywordtype">char</span> * szTarget, <span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szSource, <span class="keywordtype">size_t</span> cchLength);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">// Support for adding files to the MPQ</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="keywordtype">int</span> <a class="code" href="_storm_common_8h.html#ab45600a4a2a6fee1a3f03493e789866b">SFileAddFile_Init</a>(</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> * szArchivedName,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> ft,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwFileSize,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a> lcLocale,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwFlags,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> ** phf</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    );</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="keywordtype">int</span> <a class="code" href="_storm_common_8h.html#a8bbeffca003d324051f5a4d93a6862a3">SFileAddFile_Write</a>(</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span> * pvData,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwSize,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwCompression</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    );</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keywordtype">int</span> <a class="code" href="_storm_common_8h.html#ad5fd5f53f46b1786c28ffd042b631207">SFileAddFile_Finish</a>(</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="struct___t_m_p_q_file.html">TMPQFile</a> * hf</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    );</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">// Attributes support</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a7d3f9dcaa29374564574951db3f84fd7">SAttrLoadAttributes</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a1f552d4db51760c541354dc64e7808ea">SAttrFileSaveToMpq</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">// Listfile functions</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="keywordtype">int</span>  <a class="code" href="_storm_common_8h.html#a92fbeed559aba21268c7cf0b967e49fc">SListFileSaveToMpq</a>(<a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a> * ha);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">// Dump data support</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">#ifdef __STORMLIB_DUMP_DATA__</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a48be8004e59aedbe5a160710a86a5678">DumpMpqHeader</a>(<a class="code" href="struct___t_m_p_q_header.html">TMPQHeader</a> * pHeader);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_storm_common_8h.html#a7f114246a18664e00fd02dd493156e55">DumpHetAndBetTable</a>(<a class="code" href="struct___t_m_p_q_het_table.html">TMPQHetTable</a> * pHetTable, <a class="code" href="struct___t_m_p_q_bet_table.html">TMPQBetTable</a> * pBetTable);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a48be8004e59aedbe5a160710a86a5678">  313</a></span>&#160;<span class="preprocessor">#define DumpMpqHeader(h)           </span><span class="comment">/* */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="_storm_common_8h.html#a7f114246a18664e00fd02dd493156e55">  314</a></span>&#160;<span class="preprocessor">#define DumpHetAndBetTable(h, b)   </span><span class="comment">/* */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">#endif // __STORMCOMMON_H__</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="ttc" id="_storm_port_8h_html_abb9abb9ce956f1a9e5a4081ac40e5649"><div class="ttname"><a href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a></div><div class="ttdeci">unsigned long long ULONGLONG</div><div class="ttdef"><b>Definition:</b> StormPort.h:143</div></div>
<div class="ttc" id="_storm_common_8h_html_a7bf97c1c4ef7c27dce39e44b1cf0ea9f"><div class="ttname"><a href="_storm_common_8h.html#a7bf97c1c4ef7c27dce39e44b1cf0ea9f">LoadExtTable</a></div><div class="ttdeci">TMPQExtHeader * LoadExtTable(TMPQArchive *ha, ULONGLONG ByteOffset, size_t Size, DWORD dwSignature, DWORD dwKey)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:843</div></div>
<div class="ttc" id="_storm_common_8h_html_a5a11a3a1f4c9219d95a3eca374739e79"><div class="ttname"><a href="_storm_common_8h.html#a5a11a3a1f4c9219d95a3eca374739e79">CreateHashTable</a></div><div class="ttdeci">int CreateHashTable(TMPQArchive *ha, DWORD dwHashTableSize)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:2052</div></div>
<div class="ttc" id="_storm_common_8h_html_a7347ab3dd849dcc0350e1ca8d83af6b3"><div class="ttname"><a href="_storm_common_8h.html#a7347ab3dd849dcc0350e1ca8d83af6b3">GetFileEntryLocale</a></div><div class="ttdeci">TFileEntry * GetFileEntryLocale(TMPQArchive *ha, const char *szFileName, LCID lcLocale)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1716</div></div>
<div class="ttc" id="_storm_common_8h_html_a49c99a591813b88b38d9d219af88a8d4"><div class="ttname"><a href="_storm_common_8h.html#a49c99a591813b88b38d9d219af88a8d4">InvalidateInternalFiles</a></div><div class="ttdeci">void InvalidateInternalFiles(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1986</div></div>
<div class="ttc" id="_storm_common_8h_html_a214be2e28f839a8b8842cd1eb2f3ef71"><div class="ttname"><a href="_storm_common_8h.html#a214be2e28f839a8b8842cd1eb2f3ef71">SaveMPQTables</a></div><div class="ttdeci">int SaveMPQTables(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:2742</div></div>
<div class="ttc" id="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o_html_a9336bfe0493f5c6a49a69abbbcaf8cfd"><div class="ttname"><a href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a9336bfe0493f5c6a49a69abbbcaf8cfd">_MPQ_SIGNATURE_INFO::Signature</a></div><div class="ttdeci">BYTE Signature[MPQ_STRONG_SIGNATURE_SIZE+0x10]</div><div class="ttdef"><b>Definition:</b> StormCommon.h:89</div></div>
<div class="ttc" id="struct___t_m_p_q_hash_html"><div class="ttname"><a href="struct___t_m_p_q_hash.html">_TMPQHash</a></div><div class="ttdef"><b>Definition:</b> StormLib.h:624</div></div>
<div class="ttc" id="_storm_common_8h_html_a89b19091503d06fc3b3a3738218f2350"><div class="ttname"><a href="_storm_common_8h.html#a89b19091503d06fc3b3a3738218f2350">SCompDecompressMpk</a></div><div class="ttdeci">int SCompDecompressMpk(void *pvOutBuffer, int *pcbOutBuffer, void *pvInBuffer, int cbInBuffer)</div><div class="ttdef"><b>Definition:</b> SCompression.cpp:1134</div></div>
<div class="ttc" id="_storm_common_8h_html_a5f6fa9d0439a797a0a86c5ee70718390"><div class="ttname"><a href="_storm_common_8h.html#a5f6fa9d0439a797a0a86c5ee70718390">AsciiToUpperTable</a></div><div class="ttdeci">unsigned char AsciiToUpperTable[256]</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:53</div></div>
<div class="ttc" id="_storm_common_8h_html_a55f6d721d95cc322bd68f273b1e40ae1"><div class="ttname"><a href="_storm_common_8h.html#a55f6d721d95cc322bd68f273b1e40ae1">WriteSectorOffsets</a></div><div class="ttdeci">int WriteSectorOffsets(TMPQFile *hf)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1183</div></div>
<div class="ttc" id="_storm_port_8h_html_a143be739596851314f3c386bd6f752f9"><div class="ttname"><a href="_storm_port_8h.html#a143be739596851314f3c386bd6f752f9">LPDWORD</a></div><div class="ttdeci">DWORD * LPDWORD</div><div class="ttdef"><b>Definition:</b> StormPort.h:149</div></div>
<div class="ttc" id="_storm_common_8h_html_ac0b9f8d5f02bdef74438e8d134d229f0"><div class="ttname"><a href="_storm_common_8h.html#ac0b9f8d5f02bdef74438e8d134d229f0">CheckWildCard</a></div><div class="ttdeci">bool CheckWildCard(const char *szString, const char *szWildCard)</div><div class="ttdef"><b>Definition:</b> SFileFindFile.cpp:50</div></div>
<div class="ttc" id="_storm_common_8h_html_ad5fd5f53f46b1786c28ffd042b631207"><div class="ttname"><a href="_storm_common_8h.html#ad5fd5f53f46b1786c28ffd042b631207">SFileAddFile_Finish</a></div><div class="ttdeci">int SFileAddFile_Finish(TMPQFile *hf)</div><div class="ttdef"><b>Definition:</b> SFileAddFile.cpp:628</div></div>
<div class="ttc" id="_storm_common_8h_html_aa1133687cdff9769a49bad6d9b8abec1"><div class="ttname"><a href="_storm_common_8h.html#aa1133687cdff9769a49bad6d9b8abec1">GetFirstHashEntry</a></div><div class="ttdeci">TMPQHash * GetFirstHashEntry(TMPQArchive *ha, const char *szFileName)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:563</div></div>
<div class="ttc" id="_storm_common_8h_html_ad45353be81c314aa55264bd932a0758e"><div class="ttname"><a href="_storm_common_8h.html#ad45353be81c314aa55264bd932a0758e">LoadBetTable</a></div><div class="ttdeci">TMPQBetTable * LoadBetTable(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:2323</div></div>
<div class="ttc" id="lookup_8h_html"><div class="ttname"><a href="lookup_8h.html">lookup.h</a></div></div>
<div class="ttc" id="_storm_common_8h_html_ae019465d798f9926fd5cc63697d664f7"><div class="ttname"><a href="_storm_common_8h.html#ae019465d798f9926fd5cc63697d664f7">WritePatchInfo</a></div><div class="ttdeci">int WritePatchInfo(TMPQFile *hf)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1166</div></div>
<div class="ttc" id="_storm_common_8h_html_a064b84cb1dd914abd03d6caab3a1e99b"><div class="ttname"><a href="_storm_common_8h.html#a064b84cb1dd914abd03d6caab3a1e99b">RenameFileEntry</a></div><div class="ttdeci">int RenameFileEntry(TMPQArchive *ha, TFileEntry *pFileEntry, const char *szNewFileName)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1898</div></div>
<div class="ttc" id="_storm_common_8h_html_a8bbeffca003d324051f5a4d93a6862a3"><div class="ttname"><a href="_storm_common_8h.html#a8bbeffca003d324051f5a4d93a6862a3">SFileAddFile_Write</a></div><div class="ttdeci">int SFileAddFile_Write(TMPQFile *hf, const void *pvData, DWORD dwSize, DWORD dwCompression)</div><div class="ttdef"><b>Definition:</b> SFileAddFile.cpp:491</div></div>
<div class="ttc" id="_storm_common_8h_html_a1fa04b7884d38fcc61b7f1462b882afb"><div class="ttname"><a href="_storm_common_8h.html#a1fa04b7884d38fcc61b7f1462b882afb">DecryptMpkTable</a></div><div class="ttdeci">void DecryptMpkTable(void *pvMpkTable, size_t cbSize)</div><div class="ttdef"><b>Definition:</b> SBaseSubTypes.cpp:475</div></div>
<div class="ttc" id="_storm_common_8h_html_a2c4f65854e516a828f691cde03e83a4e"><div class="ttname"><a href="_storm_common_8h.html#a2c4f65854e516a828f691cde03e83a4e">GetDefaultSpecialFileFlags</a></div><div class="ttdeci">DWORD GetDefaultSpecialFileFlags(DWORD dwFileSize, USHORT wFormatVersion)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:257</div></div>
<div class="ttc" id="struct___t_m_p_q_file_html"><div class="ttname"><a href="struct___t_m_p_q_file.html">_TMPQFile</a></div><div class="ttdef"><b>Definition:</b> StormLib.h:872</div></div>
<div class="ttc" id="_storm_port_8h_html_a4ae1dab0fb4b072a66584546209e7d58"><div class="ttname"><a href="_storm_port_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a></div><div class="ttdeci">unsigned char BYTE</div><div class="ttdef"><b>Definition:</b> StormPort.h:135</div></div>
<div class="ttc" id="_storm_common_8h_html_a54079a3f5f4410dea238bbfcea108f88"><div class="ttname"><a href="_storm_common_8h.html#a54079a3f5f4410dea238bbfcea108f88">TranslateBlockTable</a></div><div class="ttdeci">TMPQBlock * TranslateBlockTable(TMPQArchive *ha, ULONGLONG *pcbTableSize, bool *pbNeedHiBlockTable)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:774</div></div>
<div class="ttc" id="_storm_common_8h_html_af5707ce5a7b11e9d533b24cda45ce7b1"><div class="ttname"><a href="_storm_common_8h.html#af5707ce5a7b11e9d533b24cda45ce7b1">GetFileEntryAny</a></div><div class="ttdeci">TFileEntry * GetFileEntryAny(TMPQArchive *ha, const char *szFileName)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1691</div></div>
<div class="ttc" id="_storm_common_8h_html_a01959b3dc86a80003a50a1483937ce7d"><div class="ttname"><a href="_storm_common_8h.html#a01959b3dc86a80003a50a1483937ce7d">FreeHetTable</a></div><div class="ttdeci">void FreeHetTable(TMPQHetTable *pHetTable)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1343</div></div>
<div class="ttc" id="_storm_common_8h_html_a8b8ab9555674a392a450c224cf31fcac"><div class="ttname"><a href="_storm_common_8h.html#a8b8ab9555674a392a450c224cf31fcac">ConvertSqpHeaderToFormat4</a></div><div class="ttdeci">int ConvertSqpHeaderToFormat4(TMPQArchive *ha, ULONGLONG FileSize, DWORD dwFlags)</div><div class="ttdef"><b>Definition:</b> SBaseSubTypes.cpp:95</div></div>
<div class="ttc" id="sparse_8h_html"><div class="ttname"><a href="sparse_8h.html">sparse.h</a></div></div>
<div class="ttc" id="_storm_common_8h_html_a7f114246a18664e00fd02dd493156e55"><div class="ttname"><a href="_storm_common_8h.html#a7f114246a18664e00fd02dd493156e55">DumpHetAndBetTable</a></div><div class="ttdeci">#define DumpHetAndBetTable(h, b)</div><div class="ttdef"><b>Definition:</b> StormCommon.h:314</div></div>
<div class="ttc" id="_storm_common_8h_html_ad2733622c6a770882a35d18aa6235d4f"><div class="ttname"><a href="_storm_common_8h.html#ad2733622c6a770882a35d18aa6235d4f">PatchFileData</a></div><div class="ttdeci">int PatchFileData(TMPQFile *hf)</div><div class="ttdef"><b>Definition:</b> SFilePatchArchives.cpp:427</div></div>
<div class="ttc" id="_storm_common_8h_html_a551f6e01e95accafb0042ae9b8d81e61"><div class="ttname"><a href="_storm_common_8h.html#a551f6e01e95accafb0042ae9b8d81e61">AllocateFileName</a></div><div class="ttdeci">void AllocateFileName(TMPQArchive *ha, TFileEntry *pFileEntry, const char *szFileName)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1774</div></div>
<div class="ttc" id="_storm_port_8h_html_a03bdb8ce5895c7e261aadc2529637546"><div class="ttname"><a href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a></div><div class="ttdeci">char TCHAR</div><div class="ttdef"><b>Definition:</b> StormPort.h:146</div></div>
<div class="ttc" id="_storm_common_8h_html_ac783fedd5a7c270d1c1e52e846ece77e"><div class="ttname"><a href="_storm_common_8h.html#ac783fedd5a7c270d1c1e52e846ece77e">LoadHashTable</a></div><div class="ttdeci">TMPQHash * LoadHashTable(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:2076</div></div>
<div class="ttc" id="_storm_common_8h_html_a7c410e53e1793314064827d095ba86ce"><div class="ttname"><a href="_storm_common_8h.html#a7c410e53e1793314064827d095ba86ce">HashStringJenkins</a></div><div class="ttdeci">ULONGLONG HashStringJenkins(const char *szFileName)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:225</div></div>
<div class="ttc" id="_storm_common_8h_html_acd34a41b8d29b48ac02c7aecd2f609b5"><div class="ttname"><a href="_storm_common_8h.html#acd34a41b8d29b48ac02c7aecd2f609b5">LoadAnyHashTable</a></div><div class="ttdeci">int LoadAnyHashTable(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:2346</div></div>
<div class="ttc" id="_storm_common_8h_html_a02d21e4503c849811801f033baa4b733"><div class="ttname"><a href="_storm_common_8h.html#a02d21e4503c849811801f033baa4b733">HashStringSlash</a></div><div class="ttdeci">DWORD HashStringSlash(const char *szFileName, DWORD dwHashType)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:164</div></div>
<div class="ttc" id="_storm_common_8h_html_a3192325af2d538a1196c76f8dd980d42"><div class="ttname"><a href="_storm_common_8h.html#a3192325af2d538a1196c76f8dd980d42">LoadHetTable</a></div><div class="ttdeci">TMPQHetTable * LoadHetTable(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:2301</div></div>
<div class="ttc" id="_storm_port_8h_html_ab1742dccc5f422e3ca4eee21d56e0086"><div class="ttname"><a href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a></div><div class="ttdeci">unsigned int LCID</div><div class="ttdef"><b>Definition:</b> StormPort.h:147</div></div>
<div class="ttc" id="bzlib_8h_html"><div class="ttname"><a href="bzlib_8h.html">bzlib.h</a></div></div>
<div class="ttc" id="_storm_common_8h_html_a39393674112575a09c309d648d59a3eb"><div class="ttname"><a href="_storm_common_8h.html#a39393674112575a09c309d648d59a3eb">AllocateSectorBuffer</a></div><div class="ttdeci">int AllocateSectorBuffer(TMPQFile *hf)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:858</div></div>
<div class="ttc" id="_storm_port_8h_html_a5850d5316caf7f4cedd742fdf8cd7c02"><div class="ttname"><a href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a></div><div class="ttdeci">unsigned short USHORT</div><div class="ttdef"><b>Definition:</b> StormPort.h:136</div></div>
<div class="ttc" id="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o_html_a01e3fa6f8249aa0117d68c69666a7906"><div class="ttname"><a href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a01e3fa6f8249aa0117d68c69666a7906">_MPQ_SIGNATURE_INFO::EndExclude</a></div><div class="ttdeci">ULONGLONG EndExclude</div><div class="ttdef"><b>Definition:</b> StormCommon.h:86</div></div>
<div class="ttc" id="_storm_common_8h_html_a90069131da300c2a6d9ff0b7a1b41806"><div class="ttname"><a href="_storm_common_8h.html#a90069131da300c2a6d9ff0b7a1b41806">GetFileEntryExact</a></div><div class="ttdeci">TFileEntry * GetFileEntryExact(TMPQArchive *ha, const char *szFileName, LCID lcLocale)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1741</div></div>
<div class="ttc" id="_storm_common_8h_html_a771e96257f2889763ee169050c798554"><div class="ttname"><a href="_storm_common_8h.html#a771e96257f2889763ee169050c798554">InitializeMpqCryptography</a></div><div class="ttdeci">void InitializeMpqCryptography()</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:105</div></div>
<div class="ttc" id="adpcm_8h_html"><div class="ttname"><a href="adpcm_8h.html">adpcm.h</a></div></div>
<div class="ttc" id="zlib_8h_html"><div class="ttname"><a href="zlib_8h.html">zlib.h</a></div></div>
<div class="ttc" id="_storm_common_8h_html_a91db777f32d2227ed592bd6ab587fe55"><div class="ttname"><a href="_storm_common_8h.html#a91db777f32d2227ed592bd6ab587fe55">LoadMpkBlockTable</a></div><div class="ttdeci">TMPQBlock * LoadMpkBlockTable(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseSubTypes.cpp:582</div></div>
<div class="ttc" id="pklib_8h_html"><div class="ttname"><a href="pklib_8h.html">pklib.h</a></div></div>
<div class="ttc" id="_storm_common_8h_html_aec4669e8a9275dc112ebca320ae0e08a"><div class="ttname"><a href="_storm_common_8h.html#aec4669e8a9275dc112ebca320ae0e08a">CalculateDataBlockHash</a></div><div class="ttdeci">void CalculateDataBlockHash(void *pvDataBlock, DWORD cbDataBlock, LPBYTE md5_hash)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1529</div></div>
<div class="ttc" id="_storm_common_8h_html_acb18aa3b31bc45f95eb5e493c619ce52"><div class="ttname"><a href="_storm_common_8h.html#acb18aa3b31bc45f95eb5e493c619ce52">FindFreeMpqSpace</a></div><div class="ttdeci">ULONGLONG FindFreeMpqSpace(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:655</div></div>
<div class="ttc" id="_storm_port_8h_html_a798af1e30bc65f319c1a246cecf59e39"><div class="ttname"><a href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a></div><div class="ttdeci">unsigned int DWORD</div><div class="ttdef"><b>Definition:</b> StormPort.h:138</div></div>
<div class="ttc" id="_storm_common_8h_html_a8ac0edc687ba86d98e25c700d9cb0710"><div class="ttname"><a href="_storm_common_8h.html#a8ac0edc687ba86d98e25c700d9cb0710">FreeArchiveHandle</a></div><div class="ttdeci">void FreeArchiveHandle(TMPQArchive *&amp;ha)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1416</div></div>
<div class="ttc" id="_storm_common_8h_html_a658272ad1160a2562532baec37512bb9"><div class="ttname"><a href="_storm_common_8h.html#a658272ad1160a2562532baec37512bb9">FreeBetTable</a></div><div class="ttdeci">void FreeBetTable(TMPQBetTable *pBetTable)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1673</div></div>
<div class="ttc" id="_storm_common_8h_html_ac66653be3516e818da293725ea5e0cb8"><div class="ttname"><a href="_storm_common_8h.html#ac66653be3516e818da293725ea5e0cb8">QueryMpqSignatureInfo</a></div><div class="ttdeci">bool QueryMpqSignatureInfo(TMPQArchive *ha, PMPQ_SIGNATURE_INFO pSignatureInfo)</div><div class="ttdef"><b>Definition:</b> SFileVerify.cpp:714</div></div>
<div class="ttc" id="_storm_port_8h_html_ac2d3fb16b5b34c1e6ab80014309020eb"><div class="ttname"><a href="_storm_port_8h.html#ac2d3fb16b5b34c1e6ab80014309020eb">LPBYTE</a></div><div class="ttdeci">BYTE * LPBYTE</div><div class="ttdef"><b>Definition:</b> StormPort.h:150</div></div>
<div class="ttc" id="_storm_common_8h_html_a92fbeed559aba21268c7cf0b967e49fc"><div class="ttname"><a href="_storm_common_8h.html#a92fbeed559aba21268c7cf0b967e49fc">SListFileSaveToMpq</a></div><div class="ttdeci">int SListFileSaveToMpq(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SFileListFile.cpp:359</div></div>
<div class="ttc" id="_storm_common_8h_html_a7b6bce2874782a80fc6a7ce477e8ab5e"><div class="ttname"><a href="_storm_common_8h.html#a7b6bce2874782a80fc6a7ce477e8ab5e">CalculateRawSectorOffset</a></div><div class="ttdeci">void CalculateRawSectorOffset(ULONGLONG &amp;RawFilePos, TMPQFile *hf, DWORD dwSectorOffset)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:803</div></div>
<div class="ttc" id="_storm_common_8h_html_ab6b1a62d4ecfd1a3f53b6a6f333b4c36"><div class="ttname"><a href="_storm_common_8h.html#ab6b1a62d4ecfd1a3f53b6a6f333b4c36">DetectFileKeyByContent</a></div><div class="ttdeci">DWORD DetectFileKeyByContent(void *pvEncryptedData, DWORD dwSectorSize, DWORD dwFileSize)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:430</div></div>
<div class="ttc" id="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o_html"><div class="ttname"><a href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html">_MPQ_SIGNATURE_INFO</a></div><div class="ttdef"><b>Definition:</b> StormCommon.h:82</div></div>
<div class="ttc" id="_storm_common_8h_html_a4dafa8d36c130aae1def856a8f0da655"><div class="ttname"><a href="_storm_common_8h.html#a4dafa8d36c130aae1def856a8f0da655">GetNextHashEntry</a></div><div class="ttdeci">TMPQHash * GetNextHashEntry(TMPQArchive *ha, TMPQHash *pFirstHash, TMPQHash *pPrevHash)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:595</div></div>
<div class="ttc" id="_storm_common_8h_html_af1a55a67e4f3cbec94d58be9e7b1669b"><div class="ttname"><a href="_storm_common_8h.html#af1a55a67e4f3cbec94d58be9e7b1669b">AsciiToLowerTable</a></div><div class="ttdeci">unsigned char AsciiToLowerTable[256]</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:31</div></div>
<div class="ttc" id="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o_html_a1e737f764e9830338f5c6f7a9ef078e5"><div class="ttname"><a href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a1e737f764e9830338f5c6f7a9ef078e5">_MPQ_SIGNATURE_INFO::EndMpqData</a></div><div class="ttdeci">ULONGLONG EndMpqData</div><div class="ttdef"><b>Definition:</b> StormCommon.h:87</div></div>
<div class="ttc" id="struct___t_m_p_q_het_table_html"><div class="ttname"><a href="struct___t_m_p_q_het_table.html">_TMPQHetTable</a></div><div class="ttdef"><b>Definition:</b> StormLib.h:787</div></div>
<div class="ttc" id="struct___t_m_p_q_bet_table_html"><div class="ttname"><a href="struct___t_m_p_q_bet_table.html">_TMPQBetTable</a></div><div class="ttdef"><b>Definition:</b> StormLib.h:803</div></div>
<div class="ttc" id="_storm_common_8h_html_a4fdeaeecf1f7775866f8330165b97e37"><div class="ttname"><a href="_storm_common_8h.html#a4fdeaeecf1f7775866f8330165b97e37">ConvertMpqHeaderToFormat4</a></div><div class="ttdeci">int ConvertMpqHeaderToFormat4(TMPQArchive *ha, ULONGLONG MpqOffset, ULONGLONG FileSize, DWORD dwFlags)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:335</div></div>
<div class="ttc" id="_storm_common_8h_html_a7d3f9dcaa29374564574951db3f84fd7"><div class="ttname"><a href="_storm_common_8h.html#a7d3f9dcaa29374564574951db3f84fd7">SAttrLoadAttributes</a></div><div class="ttdeci">int SAttrLoadAttributes(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SFileAttributes.cpp:360</div></div>
<div class="ttc" id="_storm_common_8h_html_a1f552d4db51760c541354dc64e7808ea"><div class="ttname"><a href="_storm_common_8h.html#a1f552d4db51760c541354dc64e7808ea">SAttrFileSaveToMpq</a></div><div class="ttdeci">int SAttrFileSaveToMpq(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SFileAttributes.cpp:406</div></div>
<div class="ttc" id="struct___t_file_entry_html"><div class="ttname"><a href="struct___t_file_entry.html">_TFileEntry</a></div><div class="ttdef"><b>Definition:</b> StormLib.h:715</div></div>
<div class="ttc" id="_storm_common_8h_html_a253e7854c54b950673d285bc8ceba83a"><div class="ttname"><a href="_storm_common_8h.html#a253e7854c54b950673d285bc8ceba83a">HashString</a></div><div class="ttdeci">DWORD HashString(const char *szFileName, DWORD dwHashType)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:144</div></div>
<div class="ttc" id="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o_html_a3ecbb8b936292bb8388965d8993c9dfa"><div class="ttname"><a href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a3ecbb8b936292bb8388965d8993c9dfa">_MPQ_SIGNATURE_INFO::EndOfFile</a></div><div class="ttdeci">ULONGLONG EndOfFile</div><div class="ttdef"><b>Definition:</b> StormCommon.h:88</div></div>
<div class="ttc" id="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o_html_a92f2e5e2e3b741203a949a968d7af326"><div class="ttname"><a href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a92f2e5e2e3b741203a949a968d7af326">_MPQ_SIGNATURE_INFO::cbSignatureSize</a></div><div class="ttdeci">DWORD cbSignatureSize</div><div class="ttdef"><b>Definition:</b> StormCommon.h:90</div></div>
<div class="ttc" id="_storm_common_8h_html_adc2df260bf34449da5b48a19c2e9a788"><div class="ttname"><a href="_storm_common_8h.html#adc2df260bf34449da5b48a19c2e9a788">LoadBlockTable</a></div><div class="ttdeci">TMPQBlock * LoadBlockTable(TMPQArchive *ha, bool bDontFixEntries=false)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:2234</div></div>
<div class="ttc" id="_storm_common_8h_html_a259665299cf78eb0e253b08d6489da68"><div class="ttname"><a href="_storm_common_8h.html#a259665299cf78eb0e253b08d6489da68">AllocateHashEntry</a></div><div class="ttdeci">TMPQHash * AllocateHashEntry(TMPQArchive *ha, TFileEntry *pFileEntry)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:625</div></div>
<div class="ttc" id="_storm_common_8h_html_a0b64f02970b56fe520a2599411b45537"><div class="ttname"><a href="_storm_common_8h.html#a0b64f02970b56fe520a2599411b45537">lcFileLocale</a></div><div class="ttdeci">LCID lcFileLocale</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:23</div></div>
<div class="ttc" id="_storm_common_8h_html_a4f32b630b4ecbefaceebbbad807e65f8"><div class="ttname"><a href="_storm_common_8h.html#a4f32b630b4ecbefaceebbbad807e65f8">RebuildFileTable</a></div><div class="ttdeci">int RebuildFileTable(TMPQArchive *ha, DWORD dwNewHashTableSize, DWORD dwNewMaxFileCount)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:2656</div></div>
<div class="ttc" id="_storm_common_8h_html_ab45600a4a2a6fee1a3f03493e789866b"><div class="ttname"><a href="_storm_common_8h.html#ab45600a4a2a6fee1a3f03493e789866b">SFileAddFile_Init</a></div><div class="ttdeci">int SFileAddFile_Init(TMPQArchive *ha, const char *szArchivedName, ULONGLONG ft, DWORD dwFileSize, LCID lcLocale, DWORD dwFlags, TMPQFile **phf)</div><div class="ttdef"><b>Definition:</b> SFileAddFile.cpp:359</div></div>
<div class="ttc" id="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o_html_a3094e3a410ac87a505e1282b1bf65c07"><div class="ttname"><a href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a3094e3a410ac87a505e1282b1bf65c07">_MPQ_SIGNATURE_INFO::SignatureTypes</a></div><div class="ttdeci">DWORD SignatureTypes</div><div class="ttdef"><b>Definition:</b> StormCommon.h:91</div></div>
<div class="ttc" id="_storm_common_8h_html_aa2f9f710a63a44de2157a48bff7c5a21"><div class="ttname"><a href="_storm_common_8h.html#aa2f9f710a63a44de2157a48bff7c5a21">GetHashTableSizeForFileCount</a></div><div class="ttdeci">DWORD GetHashTableSizeForFileCount(DWORD dwFileCount)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:207</div></div>
<div class="ttc" id="_storm_common_8h_html_a625957b3c4515b0d8664c2c7733f5ae2"><div class="ttname"><a href="_storm_common_8h.html#a625957b3c4515b0d8664c2c7733f5ae2">AllocateSectorChecksums</a></div><div class="ttdeci">int AllocateSectorChecksums(TMPQFile *hf, bool bLoadFromFile)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1089</div></div>
<div class="ttc" id="_storm_common_8h_html_a271822a4e6a88edb8f2f53df8b713023"><div class="ttname"><a href="_storm_common_8h.html#a271822a4e6a88edb8f2f53df8b713023">IsInternalMpqFileName</a></div><div class="ttdeci">bool IsInternalMpqFileName(const char *szFileName)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1451</div></div>
<div class="ttc" id="_storm_common_8h_html_af8f77586b029465f87c394f5d90532e3"><div class="ttname"><a href="_storm_common_8h.html#af8f77586b029465f87c394f5d90532e3">DetectFileKeyBySectorSize</a></div><div class="ttdeci">DWORD DetectFileKeyBySectorSize(LPDWORD EncryptedData, DWORD dwSectorSize, DWORD dwSectorOffsLen)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:335</div></div>
<div class="ttc" id="_lzma_dec_8h_html"><div class="ttname"><a href="_lzma_dec_8h.html">LzmaDec.h</a></div></div>
<div class="ttc" id="tomcrypt_8h_html"><div class="ttname"><a href="tomcrypt_8h.html">tomcrypt.h</a></div></div>
<div class="ttc" id="_storm_common_8h_html_af48f792817421c6ae782d3ea4f6e8772"><div class="ttname"><a href="_storm_common_8h.html#af48f792817421c6ae782d3ea4f6e8772">DecryptFileKey</a></div><div class="ttdeci">DWORD DecryptFileKey(const char *szFileName, ULONGLONG MpqPos, DWORD dwFileSize, DWORD dwFlags)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:462</div></div>
<div class="ttc" id="_storm_common_8h_html_aa2556e4b9e179aa51654ece65c87fa13"><div class="ttname"><a href="_storm_common_8h.html#aa2556e4b9e179aa51654ece65c87fa13">MPQ_STRONG_SIGNATURE_SIZE</a></div><div class="ttdeci">#define MPQ_STRONG_SIGNATURE_SIZE</div><div class="ttdef"><b>Definition:</b> StormCommon.h:78</div></div>
<div class="ttc" id="_storm_common_8h_html_a3216d5c62d758be099dfa3324cf34dd3"><div class="ttname"><a href="_storm_common_8h.html#a3216d5c62d758be099dfa3324cf34dd3">IsValidFileHandle</a></div><div class="ttdeci">TMPQFile * IsValidFileHandle(HANDLE hFile)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:493</div></div>
<div class="ttc" id="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o_html_a8171e5179fe19c06bf815d772416eae0"><div class="ttname"><a href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#a8171e5179fe19c06bf815d772416eae0">_MPQ_SIGNATURE_INFO::BeginMpqData</a></div><div class="ttdeci">ULONGLONG BeginMpqData</div><div class="ttdef"><b>Definition:</b> StormCommon.h:84</div></div>
<div class="ttc" id="_storm_common_8h_html_abfce4a0e949403c3bede613640942c4a"><div class="ttname"><a href="_storm_common_8h.html#abfce4a0e949403c3bede613640942c4a">WriteMemDataMD5</a></div><div class="ttdeci">int WriteMemDataMD5(TFileStream *pStream, ULONGLONG RawDataOffs, void *pvRawData, DWORD dwRawDataSize, DWORD dwChunkSize, LPDWORD pcbTotalSize)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1274</div></div>
<div class="ttc" id="_storm_common_8h_html_a7b04b4d4e21b0c707fc679cc1755082a"><div class="ttname"><a href="_storm_common_8h.html#a7b04b4d4e21b0c707fc679cc1755082a">LoadSqpHashTable</a></div><div class="ttdeci">TMPQHash * LoadSqpHashTable(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseSubTypes.cpp:183</div></div>
<div class="ttc" id="_storm_common_8h_html_ace1d87f4df2379a25c5516fbcc027d0c"><div class="ttname"><a href="_storm_common_8h.html#ace1d87f4df2379a25c5516fbcc027d0c">AllocatePatchInfo</a></div><div class="ttdeci">int AllocatePatchInfo(TMPQFile *hf, bool bLoadFromFile)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:881</div></div>
<div class="ttc" id="_storm_common_8h_html_a18f4fd98a66477ad38b6b12f27cf2ad0"><div class="ttname"><a href="_storm_common_8h.html#a18f4fd98a66477ad38b6b12f27cf2ad0">FreeFileHandle</a></div><div class="ttdeci">void FreeFileHandle(TMPQFile *&amp;hf)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1387</div></div>
<div class="ttc" id="_storm_common_8h_html_aff1ba604a76e1924e395b80e3b3ff212"><div class="ttname"><a href="_storm_common_8h.html#aff1ba604a76e1924e395b80e3b3ff212">MPQ_SIGNATURE_INFO</a></div><div class="ttdeci">struct _MPQ_SIGNATURE_INFO MPQ_SIGNATURE_INFO</div></div>
<div class="ttc" id="_storm_common_8h_html_aca2f6b3ece92ea308a9bcd3976e9e03d"><div class="ttname"><a href="_storm_common_8h.html#aca2f6b3ece92ea308a9bcd3976e9e03d">AllocateFileEntry</a></div><div class="ttdeci">TFileEntry * AllocateFileEntry(TMPQArchive *ha, const char *szFileName, LCID lcLocale)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1827</div></div>
<div class="ttc" id="_storm_common_8h_html_a336ebf1e01d695363f7f25a474e627de"><div class="ttname"><a href="_storm_common_8h.html#a336ebf1e01d695363f7f25a474e627de">WriteSectorChecksums</a></div><div class="ttdeci">int WriteSectorChecksums(TMPQFile *hf)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1216</div></div>
<div class="ttc" id="_storm_common_8h_html_a6a4cda713880840962cc256ec35ad521"><div class="ttname"><a href="_storm_common_8h.html#a6a4cda713880840962cc256ec35ad521">CopyFileName</a></div><div class="ttdeci">void CopyFileName(TCHAR *szTarget, const char *szSource, size_t cchLength)</div><div class="ttdef"><b>Definition:</b> FileStream.cpp:2854</div></div>
<div class="ttc" id="_storm_common_8h_html_a7bef07138485230b2573bffbae4b3818"><div class="ttname"><a href="_storm_common_8h.html#a7bef07138485230b2573bffbae4b3818">LoadSqpBlockTable</a></div><div class="ttdeci">TMPQBlock * LoadSqpBlockTable(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseSubTypes.cpp:239</div></div>
<div class="ttc" id="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o_html_ae2771c0504b9606e992b898e52af39f1"><div class="ttname"><a href="struct___m_p_q___s_i_g_n_a_t_u_r_e___i_n_f_o.html#ae2771c0504b9606e992b898e52af39f1">_MPQ_SIGNATURE_INFO::BeginExclude</a></div><div class="ttdeci">ULONGLONG BeginExclude</div><div class="ttdef"><b>Definition:</b> StormCommon.h:85</div></div>
<div class="ttc" id="_storm_common_8h_html_a16fc4e4dcd9e9497355b41d57caa3853"><div class="ttname"><a href="_storm_common_8h.html#a16fc4e4dcd9e9497355b41d57caa3853">DecryptMpqBlock</a></div><div class="ttdeci">void DecryptMpqBlock(void *pvDataBlock, DWORD dwLength, DWORD dwKey)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:294</div></div>
<div class="ttc" id="_storm_common_8h_html_a1c0a0948adf593a715e4cdc76bd252fd"><div class="ttname"><a href="_storm_common_8h.html#a1c0a0948adf593a715e4cdc76bd252fd">BuildFileTable</a></div><div class="ttdeci">int BuildFileTable(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:2568</div></div>
<div class="ttc" id="_storm_common_8h_html_ad65eac195a2ffc9e9ad511d7b381a9a5"><div class="ttname"><a href="_storm_common_8h.html#ad65eac195a2ffc9e9ad511d7b381a9a5">WriteMpqDataMD5</a></div><div class="ttdeci">int WriteMpqDataMD5(TFileStream *pStream, ULONGLONG RawDataOffs, DWORD dwRawDataSize, DWORD dwChunkSize)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1325</div></div>
<div class="ttc" id="_storm_common_8h_html_a0201c26eb7513898105243687243e4db"><div class="ttname"><a href="_storm_common_8h.html#a0201c26eb7513898105243687243e4db">LoadMpqTable</a></div><div class="ttdeci">void * LoadMpqTable(TMPQArchive *ha, ULONGLONG ByteOffset, DWORD dwCompressedSize, DWORD dwRealSize, DWORD dwKey)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:724</div></div>
<div class="ttc" id="_storm_common_8h_html_ab491aefc6c1009d67e63868ea2be6ecc"><div class="ttname"><a href="_storm_common_8h.html#ab491aefc6c1009d67e63868ea2be6ecc">DeleteFileEntry</a></div><div class="ttdeci">void DeleteFileEntry(TMPQArchive *ha, TFileEntry *pFileEntry)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1943</div></div>
<div class="ttc" id="_storm_common_8h_html_a67882fdf8d424efbb6b2e1f748583a66"><div class="ttname"><a href="_storm_common_8h.html#a67882fdf8d424efbb6b2e1f748583a66">IsValidMpqHandle</a></div><div class="ttdeci">TMPQArchive * IsValidMpqHandle(HANDLE hMpq)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:486</div></div>
<div class="ttc" id="huff_8h_html"><div class="ttname"><a href="huff_8h.html">huff.h</a></div></div>
<div class="ttc" id="struct_t_file_stream_html"><div class="ttname"><a href="struct_t_file_stream.html">TFileStream</a></div><div class="ttdef"><b>Definition:</b> FileStream.h:153</div></div>
<div class="ttc" id="_storm_common_8h_html_a5419ca3b1b9735690e1b6a1563194d6e"><div class="ttname"><a href="_storm_common_8h.html#a5419ca3b1b9735690e1b6a1563194d6e">IsValidMD5</a></div><div class="ttdeci">bool IsValidMD5(LPBYTE pbMd5)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1501</div></div>
<div class="ttc" id="_storm_common_8h_html_a1be8636d8ec414ad43018fdff4733251"><div class="ttname"><a href="_storm_common_8h.html#a1be8636d8ec414ad43018fdff4733251">PMPQ_SIGNATURE_INFO</a></div><div class="ttdeci">struct _MPQ_SIGNATURE_INFO * PMPQ_SIGNATURE_INFO</div></div>
<div class="ttc" id="_storm_common_8h_html_a7fa33ab8e0aa20c88f959637624ee78c"><div class="ttname"><a href="_storm_common_8h.html#a7fa33ab8e0aa20c88f959637624ee78c">VerifyDataBlockHash</a></div><div class="ttdeci">bool VerifyDataBlockHash(void *pvDataBlock, DWORD cbDataBlock, LPBYTE expected_md5)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:1511</div></div>
<div class="ttc" id="_storm_common_8h_html_af3e146ce1fda8ffaf72d6391956f29a3"><div class="ttname"><a href="_storm_common_8h.html#af3e146ce1fda8ffaf72d6391956f29a3">CreateFileHandle</a></div><div class="ttdeci">TMPQFile * CreateFileHandle(TMPQArchive *ha, TFileEntry *pFileEntry)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:692</div></div>
<div class="ttc" id="_storm_common_8h_html_a48be8004e59aedbe5a160710a86a5678"><div class="ttname"><a href="_storm_common_8h.html#a48be8004e59aedbe5a160710a86a5678">DumpMpqHeader</a></div><div class="ttdeci">#define DumpMpqHeader(h)</div><div class="ttdef"><b>Definition:</b> StormCommon.h:313</div></div>
<div class="ttc" id="_storm_common_8h_html_aa911d30d11b362e71a4980dd93919844"><div class="ttname"><a href="_storm_common_8h.html#aa911d30d11b362e71a4980dd93919844">GetPlainFileName</a></div><div class="ttdeci">const TCHAR * GetPlainFileName(const TCHAR *szFileName)</div><div class="ttdef"><b>Definition:</b> FileStream.cpp:2840</div></div>
<div class="ttc" id="_storm_common_8h_html_a47f8eede57764b029bc8f5cd31690901"><div class="ttname"><a href="_storm_common_8h.html#a47f8eede57764b029bc8f5cd31690901">LoadMpkHashTable</a></div><div class="ttdeci">TMPQHash * LoadMpkHashTable(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseSubTypes.cpp:510</div></div>
<div class="ttc" id="_storm_common_8h_html_aa45017699ee71c77d177029959cf0378"><div class="ttname"><a href="_storm_common_8h.html#aa45017699ee71c77d177029959cf0378">HashStringLower</a></div><div class="ttdeci">DWORD HashStringLower(const char *szFileName, DWORD dwHashType)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:184</div></div>
<div class="ttc" id="_storm_common_8h_html_ac689ff242d3c999ae64894707bd7b478"><div class="ttname"><a href="_storm_common_8h.html#ac689ff242d3c999ae64894707bd7b478">IsPseudoFileName</a></div><div class="ttdeci">bool IsPseudoFileName(const char *szFileName, LPDWORD pdwFileIndex)</div></div>
<div class="ttc" id="_storm_common_8h_html_ad428a6ed078dd77d5c5f5cee939d6d8d"><div class="ttname"><a href="_storm_common_8h.html#ad428a6ed078dd77d5c5f5cee939d6d8d">ConvertMpkHeaderToFormat4</a></div><div class="ttdeci">int ConvertMpkHeaderToFormat4(TMPQArchive *ha, ULONGLONG FileSize, DWORD dwFlags)</div><div class="ttdef"><b>Definition:</b> SBaseSubTypes.cpp:389</div></div>
<div class="ttc" id="_storm_common_8h_html_ad7bab920736d707aae7cde2a53387936"><div class="ttname"><a href="_storm_common_8h.html#ad7bab920736d707aae7cde2a53387936">EncryptMpqBlock</a></div><div class="ttdeci">void EncryptMpqBlock(void *pvDataBlock, DWORD dwLength, DWORD dwKey)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:271</div></div>
<div class="ttc" id="_storm_common_8h_html_a6f1d95382e1f80306051b174bb4b0da8"><div class="ttname"><a href="_storm_common_8h.html#a6f1d95382e1f80306051b174bb4b0da8">CreateBetTable</a></div><div class="ttdeci">TMPQBetTable * CreateBetTable(DWORD dwMaxFileCount)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1447</div></div>
<div class="ttc" id="_storm_common_8h_html_ae7c6e8b33178ca275ec20f68329b5d55"><div class="ttname"><a href="_storm_common_8h.html#ae7c6e8b33178ca275ec20f68329b5d55">AllocateSectorOffsets</a></div><div class="ttdeci">int AllocateSectorOffsets(TMPQFile *hf, bool bLoadFromFile)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:945</div></div>
<div class="ttc" id="_lzma_enc_8h_html"><div class="ttname"><a href="_lzma_enc_8h.html">LzmaEnc.h</a></div></div>
<div class="ttc" id="struct___t_m_p_q_block_html"><div class="ttname"><a href="struct___t_m_p_q_block.html">_TMPQBlock</a></div><div class="ttdef"><b>Definition:</b> StormLib.h:660</div></div>
<div class="ttc" id="_storm_common_8h_html_a97fd4e4b3730b45b008fbba7dc7c07e8"><div class="ttname"><a href="_storm_common_8h.html#a97fd4e4b3730b45b008fbba7dc7c07e8">RebuildHetTable</a></div><div class="ttdeci">int RebuildHetTable(TMPQArchive *ha)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:2623</div></div>
<div class="ttc" id="struct___t_m_p_q_ext_header_html"><div class="ttname"><a href="struct___t_m_p_q_ext_header.html">_TMPQExtHeader</a></div><div class="ttdef"><b>Definition:</b> StormLib.h:732</div></div>
<div class="ttc" id="_storm_port_8h_html_aa8c0374618b33785ccb02f74bcfebc46"><div class="ttname"><a href="_storm_port_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a></div><div class="ttdeci">void * HANDLE</div><div class="ttdef"><b>Definition:</b> StormPort.h:144</div></div>
<div class="ttc" id="_storm_common_8h_html_ab5bb17d96d449e811cb62181805307e0"><div class="ttname"><a href="_storm_common_8h.html#ab5bb17d96d449e811cb62181805307e0">IsIncrementalPatchFile</a></div><div class="ttdeci">bool IsIncrementalPatchFile(const void *pvData, DWORD cbData, LPDWORD pdwPatchedFileSize)</div><div class="ttdef"><b>Definition:</b> SFilePatchArchives.cpp:402</div></div>
<div class="ttc" id="_storm_common_8h_html_a9eeed4144d8cb5a5f06a0116a1c2133c"><div class="ttname"><a href="_storm_common_8h.html#a9eeed4144d8cb5a5f06a0116a1c2133c">FindFreeHashEntry</a></div><div class="ttdeci">TMPQHash * FindFreeHashEntry(TMPQArchive *ha, DWORD dwStartIndex, DWORD dwName1, DWORD dwName2, LCID lcLocale)</div><div class="ttdef"><b>Definition:</b> SBaseCommon.cpp:516</div></div>
<div class="ttc" id="_storm_common_8h_html_abf78f423c25cfc7a8065eca9dc4480af"><div class="ttname"><a href="_storm_common_8h.html#abf78f423c25cfc7a8065eca9dc4480af">GetFileEntryByIndex</a></div><div class="ttdeci">TFileEntry * GetFileEntryByIndex(TMPQArchive *ha, DWORD dwIndex)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1766</div></div>
<div class="ttc" id="struct___t_m_p_q_header_html"><div class="ttname"><a href="struct___t_m_p_q_header.html">_TMPQHeader</a></div><div class="ttdef"><b>Definition:</b> StormLib.h:533</div></div>
<div class="ttc" id="struct___t_m_p_q_archive_html"><div class="ttname"><a href="struct___t_m_p_q_archive.html">_TMPQArchive</a></div><div class="ttdef"><b>Definition:</b> StormLib.h:828</div></div>
<div class="ttc" id="_storm_common_8h_html_a993a9091ba191039478c2f74c81ac2a6"><div class="ttname"><a href="_storm_common_8h.html#a993a9091ba191039478c2f74c81ac2a6">CreateHetTable</a></div><div class="ttdeci">TMPQHetTable * CreateHetTable(DWORD dwEntryCount, DWORD dwTotalCount, DWORD dwHashBitSize, LPBYTE pbSrcData)</div><div class="ttdef"><b>Definition:</b> SBaseFileTable.cpp:1091</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
